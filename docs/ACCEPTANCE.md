# ISE MVP 验收标准

> 版本: v2.0 | 更新日期: 2026-01-25

本文档是开发人员的**唯一验收依据**。每个验收项按步骤测试，全部通过即为项目交付成功。

---

## 快速验收清单

### 核心功能 (全部必须 ✅)
- [ ] **AC-01 Onboarding 可走通**
- [ ] **AC-02 Dashboard 7 模块显示**
- [ ] **AC-03 势能状态正确判定**
- [ ] **AC-04 AM 对话生成今日焦点**
- [ ] **AC-05 PM 审计有锚点**
- [ ] **AC-06 Governor 拒绝逻辑**
- [ ] **AC-07 任务详情模态框**
- [ ] **AC-08 数据持久化**

### 部署运维 (全部必须 ✅)
- [ ] **AC-09 Vercel 部署成功**
- [ ] **AC-10 环境变量安全**
- [ ] **AC-11 HTTPS 强制启用**
- [ ] **AC-12 性能指标达标**
- [ ] **AC-13 版本回滚能力**

---

## 详细验收标准

---

### AC-01 Onboarding 可走通

**验收目标**：新用户通过 3-5 轮选择题完成身份锚定

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 清空浏览器数据，首次打开应用 | 显示 Onboarding 欢迎页面 | |
| 2 | 观察 AI 提问方式 | 显示 4-6 个预设选项 + "自定义" | |
| 3 | 点击身份选项（如"技术专家"） | < 500ms 进入下一步，无需输入文字 | |
| 4 | 点击挑战选项 | AI 根据选择推断 Anti-Vision | |
| 5 | 观察 Vision 生成 | AI 自动生成 Vision，用户可确认或调整 | |
| 6 | 点击 Constraints [跳过] | 成功跳过，进入 Dashboard | |
| 7 | 记录总轮数 | ≤ 5 轮完成 | |

#### 验收数据检查

完成后检查存储的数据：

```json
{
  "target": "技术专家",           // ✅ 有值
  "vision": "成为能...",          // ✅ 有值
  "antiVision": "35岁还在...",    // ✅ 有值
  "constraints": [],              // ✅ 可为空（已跳过）
  "dayCount": 1                   // ✅ 从 1 开始
}
```

---

### AC-02 Dashboard 7 模块显示

**验收目标**：Dashboard 首屏显示 7 个核心模块，布局清晰

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 完成 Onboarding 进入 Dashboard | 首屏加载 < 2s (LCP) | |
| 2 | 检查顶部 | **Identity Header**：显示身份 + Day N | |
| 3 | 检查左上区域 | **今日唯一焦点**：视觉权重最高 | |
| 4 | 检查右上区域 | **蓝图对照**：Vision/Anti-Vision/Constraints | |
| 5 | 检查中部 | **Momentum Matrix**：任务卡片阵列 | |
| 6 | 检查左下 | **进度概览**：✅ N 🟡 N 🔴 N | |
| 7 | 检查右下 | **偏离提醒**：⚠️ 提示信息 | |
| 8 | 检查底部 | **Auditor Console**：AI 对话框 | |

#### 响应式测试

| 分辨率 | 测试方法 | 预期结果 | ✅/❌ |
|--------|----------|----------|-------|
| 1920x1080 | Chrome DevTools | 7 模块全部可见，双列布局 | |
| 768x1024 | Chrome DevTools | 模块重排，单列/双列混合 | |
| 375x667 | Chrome DevTools | 单列布局，滚动可见全部 | |

---

### AC-03 势能状态正确判定

**验收目标**：任务根据更新时间正确显示 🟢🟡🔴 状态

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 创建任务 A，今天更新 | 显示 🟢 绿色边框 + 绿色发光 | |
| 2 | 创建任务 B，模拟 5 天前更新 | 显示 🟡 黄色边框 + 黄色发光 | |
| 3 | 创建任务 C，模拟 10 天前更新 | 显示 🔴 红色边框 + 红色发光 | |
| 4 | 更新任务 C 的进展 | 状态从 🔴 变为 🟢 | |

#### 判定规则验证

| 条件 | 应显示 | 实际显示 | ✅/❌ |
|------|--------|----------|-------|
| 最近 3 天有更新 | 🟢 进展中 | | |
| 3-7 天无更新 | 🟡 停滞 | | |
| 7+ 天无更新 | 🔴 危险 | | |

---

### AC-04 AM 对话生成今日焦点

**验收目标**：早间 AI 对话正确生成 Non-negotiable 建议

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 早间打开 Dashboard | Auditor Console 显示 AM 问候 | |
| 2 | 观察 AI 消息内容 | 提及用户身份（如"独立开发者"） | |
| 3 | 观察 AI 建议 | 基于项目进度给出具体 Non-negotiable | |
| 4 | 检查选项按钮 | 显示 [接受建议] [我有其他想法] [先看看任务状态] | |
| 5 | 点击 [接受建议] | 今日焦点模块更新为该任务 | |

#### AI 输出质量检查

| 检查项 | 标准 | ✅/❌ |
|--------|------|-------|
| 提及用户身份 | 包含 Identity Target | |
| 建议具体 | 不是泛泛的"努力工作" | |
| 基于数据 | 引用当前任务状态 | |

---

### AC-05 PM 审计有锚点

**验收目标**：晚间 AI 审计围绕 Vision 和 Constraints 反馈

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 模拟任务完成情况（完成/未完成） | - | |
| 2 | 触发 PM 审计对话 | AI 询问今日 Non-neg 完成情况 | |
| 3 | 回答"完成了一半" | AI 追问具体到哪里 | |
| 4 | 观察 AI 反馈 | **必须**提及 Vision | |
| 5 | 观察 AI 反馈 | **必须**提及历史趋势（如"过去 5 天..."） | |
| 6 | 检查反馈语气 | **禁止**出现"你已经很努力了" | |

#### AI 输出质量检查

| 检查项 | ✅ 正确示例 | ❌ 错误示例 | 实际 |
|--------|-------------|-------------|------|
| 身份锚定 | "作为独立开发者..." | 无身份提及 | |
| 数据引用 | "过去 5 天停滞" | 无数据支撑 | |
| 禁止鸡汤 | "你会允许自己...吗？" | "你很努力了" | |
| 选项提供 | 3 个选择按钮 | 纯文本无选项 | |

---

### AC-06 Governor 拒绝逻辑

**验收目标**：红色任务 ≥ 2 或执行率 < 50% 时拒绝新增目标

#### 测试场景 A：红色任务 ≥ 2

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 创建 2 个任务，模拟均 10+ 天未更新 | 显示 2 个 🔴 红色任务 | |
| 2 | 点击 [添加新目标] | 弹出拒绝对话框 | |
| 3 | 检查拒绝标题 | "无法添加新目标" | |
| 4 | 检查拒绝原因 | "你当前有 2 个任务处于危险状态" | |
| 5 | 检查 Dan Koe 引用 | "你得到的不是你追求的，而是你耐受的" | |
| 6 | 检查选项按钮 | [查看停滞任务] [关闭一个目标] [我理解了] | |

#### 测试场景 B：执行率 < 50%

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 模拟过去 3 天：2 个任务只完成 0.5 个 | 执行率 = 25% | |
| 2 | 点击 [添加新目标] | 弹出拒绝对话框 | |
| 3 | 检查拒绝原因 | "你最近 3 天执行率只有 25%" | |

#### 测试场景 C：允许但警告

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 确保红色任务 < 2 且执行率 ≥ 50% | - | |
| 2 | 点击 [添加新目标] | 允许添加，但显示警告 | |
| 3 | 检查警告内容 | "添加新目标会分散精力" | |

---

### AC-07 任务详情模态框

**验收目标**：点击任务卡片显示完整详情

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 点击任意任务卡片 | 弹出模态框，有动画效果 | |
| 2 | 检查势能状态 | 显示 🟢/🟡/🔴 + 状态文字 | |
| 3 | 检查上次质变日期 | 显示日期 + 当时的进展描述 | |
| 4 | 检查 Friction Points | 显示 AI 识别的阻力点列表 | |
| 5 | 检查 Vision 映射 | 说明任务与 Vision 的关系 | |
| 6 | 点击关闭按钮 | 模态框关闭，有动画 | |
| 7 | 点击遮罩层 | 模态框关闭 | |

---

### AC-08 数据持久化

**验收目标**：刷新/关闭后数据不丢失

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 完成 Onboarding，创建 2 个任务 | - | |
| 2 | 记录当前状态：Identity、Tasks、Day | - | |
| 3 | 按 F5 刷新页面 | 所有数据完全恢复 | |
| 4 | 关闭浏览器标签 | - | |
| 5 | 重新打开应用 | 所有数据完全恢复 | |
| 6 | DevTools 禁用 localStorage | - | |
| 7 | 刷新页面 | 从 Vercel KV 恢复数据 | |
| 8 | 模拟 Vercel KV 不可用 | 从 localStorage 恢复（降级） | |

#### 数据完整性检查

| 数据项 | 刷新前 | 刷新后 | ✅/❌ |
|--------|--------|--------|-------|
| Identity Target | | | |
| Vision | | | |
| Anti-Vision | | | |
| Constraints | | | |
| Day Count | | | |
| 任务数量 | | | |
| 任务势能状态 | | | |

---

### AC-09 Vercel 部署成功

**验收目标**：项目成功部署到 Vercel

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 查看 Vercel 部署日志 | Build 成功，无错误 | |
| 2 | 检查 TypeScript 编译 | 0 errors | |
| 3 | 检查构建时间 | < 3 分钟 | |
| 4 | 检查 First Load JS | < 500KB | |
| 5 | 访问生产 URL | 页面正常加载 | |
| 6 | 访问 /api/health | 返回 200 OK | |

---

### AC-10 环境变量安全

**验收目标**：敏感信息不暴露到客户端

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | Chrome DevTools → Sources | 搜索 "sk-" | 无结果 | |
| 2 | Chrome DevTools → Sources | 搜索 API Key | 无结果 | |
| 3 | Chrome DevTools → Network | 检查请求头 | 无 API Key 暴露 | |
| 4 | 检查 next.config.js | 无 env 暴露到客户端 | |

---

### AC-11 HTTPS 强制启用

**验收目标**：HTTP 自动重定向到 HTTPS

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 浏览器访问 http://your-app.vercel.app | 自动重定向到 https:// | |
| 2 | 检查响应头 | 包含 Strict-Transport-Security | |
| 3 | Chrome 地址栏 | 显示 🔒 锁图标 | |

---

### AC-12 性能指标达标

**验收目标**：Core Web Vitals 达标

#### 测试步骤（使用 Lighthouse）

| 指标 | 目标值 | 实际值 | ✅/❌ |
|------|--------|--------|-------|
| Performance Score | > 80 | | |
| LCP (Largest Contentful Paint) | < 2.5s | | |
| FID (First Input Delay) | < 100ms | | |
| CLS (Cumulative Layout Shift) | < 0.1 | | |
| FCP (First Contentful Paint) | < 1.8s | | |
| TTFB (Time to First Byte) | < 800ms | | |

#### AI 响应性能

| 测试项 | 目标值 | 实际值 | ✅/❌ |
|--------|--------|--------|-------|
| AI 首次响应开始输出 | < 3s | | |
| 选项点击响应 | < 500ms | | |

---

### AC-13 版本回滚能力

**验收目标**：可快速回滚到上一版本

#### 测试步骤

| 步骤 | 操作 | 预期结果 | ✅/❌ |
|------|------|----------|-------|
| 1 | 登录 Vercel Dashboard | - | |
| 2 | 查看 Deployments | 有多个版本记录 | |
| 3 | 选择上一个版本 | - | |
| 4 | 点击 "Promote to Production" | 开始回滚 | |
| 5 | 计时回滚完成 | < 1 分钟 | |
| 6 | 访问生产 URL | 旧版本正常运行 | |

---

## 不在验收范围 (V1+)

以下功能 MVP **明确不做**：

| 功能 | 说明 |
|------|------|
| ❌ 自动化日间多次提醒 | 仅 AM/PM 两个时点 |
| ❌ 完整游戏化 | 无 XP、成就、等级 |
| ❌ 势能曲线图表 | 仅颜色状态，无趋势图 |
| ❌ 多用户/账号系统 | 单用户本地数据 |
| ❌ Day Check-in | 无中途校准 |

---

## 验收签字表

| 验收项 | 通过 | 测试人 | 日期 | 备注 |
|--------|------|--------|------|------|
| AC-01 Onboarding | ☐ | | | |
| AC-02 Dashboard | ☐ | | | |
| AC-03 势能状态 | ☐ | | | |
| AC-04 AM 对话 | ☐ | | | |
| AC-05 PM 审计 | ☐ | | | |
| AC-06 Governor | ☐ | | | |
| AC-07 任务详情 | ☐ | | | |
| AC-08 数据持久化 | ☐ | | | |
| AC-09 部署成功 | ☐ | | | |
| AC-10 环境变量 | ☐ | | | |
| AC-11 HTTPS | ☐ | | | |
| AC-12 性能指标 | ☐ | | | |
| AC-13 版本回滚 | ☐ | | | |

**验收结论：** ☐ 通过（全部 ✅） / ☐ 不通过（存在 ❌）

**验收负责人签字：** _______________

**日期：** _______________

---

*文档版本: v2.0 | 创建日期: 2026-01-25*
